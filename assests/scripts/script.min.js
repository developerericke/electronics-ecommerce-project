let footerContentScript,LoggedInsmallScript,LoggedInLargeScript,notLoggedInLargeScript,notLoggedInsmallScript;footerContentScript=' <ul style="list-style-type: none;padding: 0px;"><li class="footer-item"> <span class="footer-title">Quick Links</span>     <ul>        <li>Samsung</li>        <li>Oppo</li>        <li>Tecno</li>        <li>Laptop</li>        <li>Laptop Accessories</li>     </ul></li><li  class="footer-item"><span class="footer-title">Important Information</span>    <ul><li >About Us</li>         <li>Contact Us</li>          <li>Privacy Policy</li>        <li>Terms and Conditions</li> </ul><li  class="footer-item"><span class="footer-title"> Our Location</span>    <ul><li >        BIGHOUSE BUILDING <br>        P.O BOX 123-456 <br>        NAIROBI,KENYA    </li></ul></li><li  class="footer-item"><span class="footer-title">Contact Us</span>    <ul>        <li>Facebook</li>        <li>Twitter</li>        <li>Youtube</li>        <li>Tel: +25412345678</li>     </ul></li></ul>',notLoggedInLargeScript='<a href="/"><div id="home-icon" class="w3-col s5 m4 l4"><img src="./assests/images/home-icon.jpg" class="w3-round-large" alt="Home Icon"></div></a><div id="search-section" class="w3-col s7 m8 l4 ">    <form action="#" method="get">        <input placeholder="Search ..." class="w3-round-xxlarge w3-input w3-border w3-border-bottom  " type="search" name="searchKeywaords" id="serachBar">    </form></div> <div id="account-actions" class="l4 w3-col w3-round-xlarge">    <ul id="account-actions-ul">       <a href="/authentication.html"><li  class="nav-icon"> <i class="fas w3-text-green fa-shopping-cart"></i>            <sup style="font-weight: bold;" class="basket_status w3-text-brown"></sup>            <ul><li class="shop_basket"><span class="w3-small">Cart</span></li>            </ul>                   </li></a>        <a href="/authentication.html"><li class="nav-icon">    <i class="fas fa-user"></i>        <ul>            <li id="account-status">         <span class="w3-small">Login/Signup</span></li></ul>                  </li></a>        <li class="nav-icon">  <i class="fas fa-headset"></i>            <ul><li>              <span class="w3-small">Support</span></li></ul>        </li>    </ul></div>',notLoggedInsmallScript=' <div class="w3-row" id="nav-bar-small"><a id="small-home-link" href="index.html"><div class="w3-col s3">Home<br><i  class="fas fa-home"></i> </div></a><a id="small-cart-link" href="authentication.html"><div class="w3-col s3 shop_basket">Cart <br><i class="fas w3-text-green fa-shopping-cart"></i><sup  style="font-weight: bolder;" class="basket_status w3-text-brown"></sup> </div></a><a href="support.html"><div class="w3-col s3">Support <br><i class="fas fa-headset"></i> </div></a><a  id="small-dashboard-link" href="authentication.html"><div class="w3-col s3">My Account <br><i class="fas fa-user"></i></div></a></div>',LoggedInLargeScript='<a href="/"><div id="home-icon" class="w3-col s5 m4 l4"><img src="./assests/images/home-icon.jpg" class="w3-round-large" alt="Home Icon"></div></a><div id="search-section" class="w3-col s7 m8 l4 ">    <form action="#" method="get">        <input placeholder="Search ..." class="w3-round-xxlarge w3-input w3-border w3-border-bottom  " type="search" name="searchKeywaords" id="serachBar">    </form></div> <div id="account-actions" class="l4 w3-col w3-round-xlarge">    <ul id="account-actions-ul">       <a href="/checkout.html"><li  class="nav-icon"> <i class="fas w3-text-green fa-shopping-cart"></i>            <sup style="font-weight: bold;" class="basket_status w3-text-brown"></sup>            <ul><li class="shop_basket"><span class="w3-small">Cart</span></li>            </ul>                   </li></a>       <a href="/dashboard.html" <li class="nav-icon">    <i class="fas fa-user-check"></i>        <ul>            <li id="account-status">         <span class="w3-small">My Account</span></li></ul>                  </li></a>        <a href="/logout.html"><li class="nav-icon">  <i class="fas w3-text-red fa-arrow-right"></i>            <ul><li>              <span class="w3-small">Logout</span></li></ul>        </li></a>    </ul></div>',LoggedInsmallScript=' <div class="w3-row" id="nav-bar-small"><a id="small-home-link" href="index.html"><div class="w3-col s3">Home<br><i  class="fas fa-home"></i> </div></a><a id="small-cart-link" href="checkout.html"><div class="w3-col s3 shop_basket">Cart <br><i class="fas w3-text-green fa-shopping-cart"></i><sup  style="font-weight: bolder;" class="basket_status w3-text-brown"></sup> </div></a><a href="support.html"><div class="w3-col s3">Support <br><i class="fas fa-headset"></i> </div></a><a id="small-dashboard-link" href="dashboard.html"><div class="w3-col s3">My Account <br><i class="fas fa-user"></i></div></a></div>';let mylocation=window.location.href,currentL=mylocation.split("/"),xhttp=new XMLHttpRequest;class styler{constructor(item){this.item=item}applyStyle(color,bg){this.item.style.color=color,this.item.style.backgroundColor=bg}updateinnerhtml(message){this.item.innerHTML=message}}function grabBYID(id){return document.querySelector(id)}let errbg="#ffcccc",succbg="#ccffcc",procbg="black";function animator(){let cart=JSON.parse(localStorage.basketDetails);if(null===cart)document.querySelectorAll(".basket_status").forEach(itm=>{itm.innerText=0,itm.classList.value="basket_status w3-text-brown"});else{let cartValue=0;cart.forEach(itm=>{cartValue+=Number(itm.itemQuantity)}),document.querySelectorAll(".basket_status").forEach(itm=>{itm.innerText=cartValue,itm.classList.value="basket_status w3-text-brown"})}}function updateCartInput(val){document.querySelectorAll(".basket_status").forEach(item=>{item.classList.value="basket_status "}),document.querySelectorAll(".cartVALUE").forEach(itm=>{itm.value=val;let event=new Event("change");itm.dispatchEvent(event)})}if(document.querySelectorAll(".cartVALUE").forEach(itm=>{itm.addEventListener("change",(function(){document.querySelectorAll(".basket_status").forEach(item=>{getComputedStyle(item).animation,item.classList.value="basket_status anime-class  w3-text-brown"})}))}),"undefined"!=typeof Storage){if(void 0===localStorage.navigationTrack&&localStorage.setItem("navigationTrack",null),void 0===localStorage.basketDetails)localStorage.setItem("basketDetails",null),document.querySelectorAll(".basket_status").forEach(itm=>{itm.innerText=0,updateCartInput(0)});else if("null"!==localStorage.basketDetails){let curr_bask=JSON.parse(localStorage.basketDetails),cartCount=0;curr_bask.forEach(itm=>{cartCount+=Number(itm.itemQuantity)}),document.querySelectorAll(".basket_status").forEach(itm=>{itm.innerText=cartCount,updateCartInput(cartCount)})}void 0===localStorage.favourites&&localStorage.setItem("favourites","")}else document.querySelector("body").html="This website Relies on LocalStorage and Cookie.Please enable them or uprade your browser";if(currentL[3].search("index.html")>-1||""===currentL[3]){let cartBTN=document.querySelectorAll(".addtoCart");var cartCounter;let cartValue;document.querySelectorAll(".basket_status").forEach(itm=>{updateCartInput(cartCounter=itm.innerText)}),cartBTN.forEach(btn=>{btn.addEventListener("click",(function(){let itmID=this.value,ITEMID=itmID.split(",")[0].split(":")[1].slice(1,-1),ITEMQuant=itmID.split(",")[1].split(":")[1].slice(1,2),BasketDetails=localStorage.basketDetails;if("null"===BasketDetails)new Promise((resolve,reject)=>{localStorage.basketDetails='[{"itemID":"'+ITEMID+'","itemQuantity":"1"}]',resolve()}).then(()=>{document.querySelectorAll(".basket_status").forEach(itm=>{itm.innerText=1,updateCartInput(1)})}).catch(error=>{console.log(error)});else if("null"!==BasketDetails){let searchRes;if(-1==BasketDetails.search(ITEMID)){let curr_bask_status=JSON.parse(localStorage.basketDetails);curr_bask_status.push({itemID:ITEMID,itemQuantity:"1"}),localStorage.basketDetails=JSON.stringify(curr_bask_status);let curr_bask=JSON.parse(localStorage.basketDetails);cartValue=0,curr_bask.forEach(itm=>{cartValue+=Number(itm.itemQuantity)}),document.querySelectorAll(".basket_status").forEach(itm=>{itm.innerText=cartValue,updateCartInput(cartValue)})}else{let curr_bask_status,Z=JSON.parse(localStorage.basketDetails).filter((itm,index)=>itm.itemID===ITEMID),prev_quantity=JSON.stringify(Z[0]),quantity_tracker=Number(Z[0].itemQuantity);quantity_tracker_new=quantity_tracker+1,BasketDetails=localStorage.basketDetails;let updated_quantity=JSON.stringify({itemID:ITEMID,itemQuantity:quantity_tracker_new.toString()}),updatedBasket=BasketDetails.replace(prev_quantity,updated_quantity);localStorage.basketDetails=updatedBasket;let curr_bask=JSON.parse(localStorage.basketDetails),initcart=0;curr_bask.forEach(itm=>{initcart+=Number(itm.itemQuantity)}),document.querySelectorAll(".basket_status").forEach(itm=>{itm.innerText=initcart,updateCartInput(initcart)})}}}))}),document.querySelectorAll(".favicon").forEach(icon=>{icon.addEventListener("click",(function(){document.getElementById(this.id).style.color="brown";let key1="[",key2="]";if(localStorage.favourites.indexOf("[")>-1&&localStorage.favourites.indexOf("]")>-1&&-1===localStorage.favourites.indexOf(this.id)){let currentFav=localStorage.favourites.slice("1","-1");localStorage.favourites="["+currentFav+","+this.id+"]"}else-1===localStorage.favourites.indexOf("[")&&-1===localStorage.favourites.indexOf("]")&&-1===localStorage.favourites.indexOf(this.id)&&(localStorage.favourites="["+this.id+"]")}))})}else if(currentL[3].search("authentication.html")>-1){let nextRoute;nextRoute=0===document.referrer.length?"/":document.referrer.search("dashboard")>-1?"/dashboard.html":document.referrer.search("checkout")>-1?"/checkout.html":"/dashboard.html";let footer=document.querySelector("#footer-content"),navbarLarge=document.querySelector("#nav-bar-large"),navbarSmall=document.querySelector("#nav-bar-small");animator();let loginForm=document.querySelector("#login_form"),signupForm=document.querySelector("#sign_up_form"),forgotpasswordForm=document.querySelector("#forgot-password"),forgpassbtn=document.querySelectorAll(".forgot-password-instead"),signupbtn=document.querySelectorAll(".signup-instead"),loginbtn=document.querySelectorAll(".login-instead");footer.innerHTML=footerContentScript,navbarLarge.innerHTML=notLoggedInLargeScript,navbarSmall.innerHTML=notLoggedInsmallScript,signupbtn.forEach(btn=>{btn.addEventListener("click",(function(e){loginForm.style.display="none",forgotpasswordForm.style.display="none",signupForm.style.display="block"}))}),forgpassbtn.forEach(btn=>{btn.addEventListener("click",(function(){loginForm.style.display="none",signupForm.style.display="none",forgotpasswordForm.style.display="block"}))}),loginbtn.forEach(btn=>{btn.addEventListener("click",(function(){loginForm.style.display="block",signupForm.style.display="none",forgotpasswordForm.style.display="none"}))}),document.querySelector("#fullname").addEventListener("keyup",(function(){let value=this.value,label=document.querySelector("#reg_name_label"),patt=/[0-9]/g;value.length<5?(signupForm.querySelectorAll(".authenticatebtn")[0].disabled=!0,label.style.color="red",label.innerHTML='Full Name too Short  <i class="fas fa-stop-circle"></i>'):1==patt.test(value)?(signupForm.querySelectorAll(".authenticatebtn")[0].disabled=!0,label.style.color="red",label.innerHTML='Name cannot contain Numbers <i class="fas fa-stop-circle"></i> '):(signupForm.querySelectorAll(".authenticatebtn")[0].disabled=!1,label.style.color="green",label.innerHTML='Full Name  <i class="fas fa-check"></i>')})),document.querySelector("#reg_password").addEventListener("keyup",(function(e){let value=this.value,label=document.querySelector("#reg_pass_label"),hasNumeric=/[0-9]/g,hasLetter=/[a-zA-Z]/;value.length<6||value.length>15?(signupForm.querySelectorAll(".authenticatebtn")[0].disabled=!0,label.style.color="red",label.innerHTML='Password must be between 6 and 15 characters long  <i class="fas fa-stop-circle"></i>'):0==hasNumeric.test(value)?(signupForm.querySelectorAll(".authenticatebtn")[0].disabled=!0,label.style.color="red",label.innerHTML='Password Must Contain atleast one Number  <i class="fas fa-stop-circle"></i>'):0==hasLetter.test(value)?(signupForm.querySelectorAll(".authenticatebtn")[0].disabled=!0,label.style.color="red",label.innerHTML='Password Must Contain atleast one Letter  <i class="fas fa-stop-circle"></i>'):(signupForm.querySelectorAll(".authenticatebtn")[0].disabled=!1,label.style.color="green",label.innerHTML='Password  <i class="fas fa-check"></i>')})),document.querySelector("#confirm_password").addEventListener("keyup",(function(){let value=this.value,password=document.querySelector("#reg_password").value,label=document.querySelector("#reg_pass_conf_label");value!==password?(signupForm.querySelectorAll(".authenticatebtn")[0].disabled=!0,label.style.color="red",label.innerHTML='Confirmation Password Must match Desired Password <i class="fas fa-stop-circle"></i> '):(signupForm.querySelectorAll(".authenticatebtn")[0].disabled=!1,label.style.color="green",label.innerHTML='Confirmation Password  <i class="fas fa-check"></i>')})),signupForm.addEventListener("submit",(function(e){e.preventDefault(),document.querySelector("body").scrollTop=0;let signupData=[],label=document.querySelector("#"+this.id).querySelectorAll("label"),defaultLabels=function(){label.forEach(label=>{label.style.color="black"}),label[0].innerHTML="FullName",label[1].innerHTML="Email",label[2].innerHTML="Password",label[3].innerHTML="Confirm Password"},inputs=document.querySelector("#"+this.id).querySelectorAll(".w3-input");inputs.forEach(input=>{signupData.push(input.name+"="+input.value)});let statusBar=grabBYID("#signup_status");xhttp.onreadystatechange=function(){if(1===this.readyState)statusBar.style.backgroundColor="wheat",statusBar.style.color="green",statusBar.innerHTML='Processing.Please wait <i class="w3-spin fas fa-spinner"></i>',defaultLabels();else if(4===this.readyState)if(200===this.status)statusBar.style.backgroundColor="#ccffcc",statusBar.style.color="black",statusBar.innerText="Registration Was Succesfull",inputs.forEach(input=>{input.value=""}),defaultLabels(),window.location.href="/authentication.html";else if(500===this.status)statusBar.style.backgroundColor="#ffcccc",statusBar.style.color="black",statusBar.innerText="Your Request cannot be Completed.Try again Later",inputs.forEach(input=>{input.value=""}),defaultLabels();else if(0===this.status)statusBar.style.backgroundColor="#ffcccc",statusBar.style.color="black",statusBar.innerText="Oops. You seem to have lost your Internet Connection";else if(400===this.status){let htmlCreatederrors;statusBar.style.backgroundColor="#ffcccc",statusBar.style.color="black",htmlCreatederrors="",JSON.parse(this.responseText).errors.forEach(error=>{htmlCreatederrors=htmlCreatederrors+'<i class="fas fa-exclamation-triangle w3-small w3-text-yellow"></i><span class=" w3-text-gray">  '+error+"</span><br>"}),console.log(htmlCreatederrors),statusBar.innerHTML='<div style=text-decoration:underline" class=" w3-small"> Correct the Highlighted errors below :</div> <span class="w3-tiny ">'+htmlCreatederrors+"</span>"}},xhttp.open("POST",post_add_user,!0),xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhttp.send(signupData.join("&"))})),loginForm.addEventListener("submit",(function(e){e.preventDefault(),document.querySelector("body").scrollTop=0;let login_progress=document.querySelector("#login_progress"),xhttp=new XMLHttpRequest,inputs=document.querySelector("#"+this.id).querySelectorAll(".w3-input"),LoginData=[];inputs.forEach(input=>{LoginData.push(input.name+"="+input.value)}),xhttp.onreadystatechange=function(){1===this.readyState?(login_progress.style.backgroundColor="wheat",login_progress.innerHTML=' Authenticating.Please wait <i class="w3-spin fas fa-spinner"></i>',login_progress.style.color="green"):4===this.readyState&&(0==this.status?(login_progress.style.backgroundColor="#ffcccc",login_progress.innerText="Oops. You seem to have lost your internet connection",login_progress.style.color="black"):200===this.status?(login_progress.style.backgroundColor="#ccffcc",login_progress.innerText="Success",login_progress.style.color="black",window.location.href=nextRoute):401===this.status&&(login_progress.style.backgroundColor="#ffcccc",login_progress.innerText="Invalid Login Details",login_progress.style.color="#000000"))},xhttp.open("POST",post_login_user,!0),xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhttp.send(LoginData.join("&"))})),forgotpasswordForm.addEventListener("submit",(function(e){e.preventDefault(),document.querySelector("body").scrollTop=0;let statusbar=document.querySelector("#processStatus"),recovery_email=document.querySelector("#recovery_email");xhttp.onreadystatechange=function(){1===this.readyState?(statusbar.style.backgroundColor="wheat",statusbar.style.color="green",statusbar.innerHTML='Processing.Please wait <i class="w3-spin fas fa-spinner"></i>'):4===this.readyState&&(200===this.status?(statusbar.style.backgroundColor="#ccffcc",statusbar.style.color="black",statusbar.innerText="An Email has been sent to "+recovery_email.value+" with account recovery instructions",recovery_email.value=""):401===this.status?(statusbar.style.backgroundColor="#ffcccc",statusbar.style.color="black",statusbar.innerText="The  email you provided is incorrect"):404===this.status&&(statusbar.style.backgroundColor="#ffcccc",statusbar.style.color="black",statusbar.innerText="Something went wrong"))},xhttp.open("POST",post_recover_account,!0),xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhttp.send("recovery_email="+recovery_email.value)}))}else if(currentL[3].search("address-book.html")>-1){animator();let addressbook=document.querySelector("#add-address"),selectDefault=document.querySelectorAll(".defSelect "),delAddress=document.querySelectorAll(".delAddress");function addresslabelsDef(){addressbook.querySelectorAll("input").forEach(input=>{input.value=""}),addressbook.querySelectorAll("label").forEach(label=>{label.style.color="black"}),document.querySelector("#recipientLabel").innerHTML="Recipient Name",document.querySelector("#poBOXLabel").innerHTML="P.O BOX",document.querySelector("#locationLabel").innerHTML="Location",document.querySelector("#phoneLabel").innerHTML="Phone",document.querySelector("#locDescLabel").innerHTML="Location Description",document.querySelector("#CountyLabel").innerHTML="County"}selectDefault.forEach(btn=>{btn.addEventListener("click",(function(){let id=btn.parentNode.id;xhttp.onreadystatechange=function(){1===this.readyState?(btn.style.fontWeight="bold",btn.style.color="green",btn.innerHTML='<span class="w3-small">Updating to default </span><img class="loadgif" src="./assests/images/833.gif" alt="loader">',document.querySelector("#"+id).querySelectorAll(".delAddress")[0].style.display="none"):4===this.readyState&&(200===this.status?(btn.style.backgroundColor=succbg,btn.style.color="black",btn.innerHTML="Default Selected",setTimeout(()=>{window.location.reload()},200)):401===this.status?window.location.href="/authentication.html":(btn.style.color="red",btn.innerHTML="Something is wrong.",setTimeout(()=>{btn.style.backgroundColor="white",btn.style.color="blue",btn.innerHTML="Select as Default"},2500)))},xhttp.open("POST",post_set_address_as_default,!0),xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhttp.send("address_id="+id)}))}),delAddress.forEach(btn=>{btn.addEventListener("click",(function(){let id=btn.parentNode.id;xhttp.onreadystatechange=function(){1===this.readyState?(btn.style.fontWeight="bold",btn.innerHTML='<span class="w3-small">Processing </span><img class="loadgif" src="./assests/images/833.gif" alt="loader">'):4===this.readyState&&(200===this.status?window.location.reload():401===this.status?window.location.href="/authentication.html":(btn.innerHTML="Something is Wrong.",setTimeout(()=>{btn.innerHTML="Delete Address"},2500)))},xhttp.open("POST",post_delete_address,!0),xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhttp.send("address_id="+id)}))});let recipient=document.querySelector("#recipient"),box=document.querySelector("#poBOX"),reclocation=document.querySelector("#location"),recphone=document.querySelector("#phone"),county=document.querySelector("#County"),locDesc=document.querySelector("#locDesc");recipient.addEventListener("keyup",(function(e){let value=this.value,regex=/[a-zA-Z]/g;value.length<6?(document.querySelector("#"+this.id+"Label").style.color="red",document.querySelector("#"+this.id+"Label").innerHTML="Recipient Name must contain atleast 6 characters",addressbook.querySelector("button").disabled=!0):!1===regex.test(value)||!0===/[0-9]/g.test(value)?(document.querySelector("#"+this.id+"Label").style.color="red",document.querySelector("#"+this.id+"Label").innerHTML="Recipient Name can only contain letters",addressbook.querySelector("button").disabled=!0):(document.querySelector("#"+this.id+"Label").style.color="green",document.querySelector("#"+this.id+"Label").innerHTML='Recipient Name <i class="fas fa-check"></i>',addressbook.querySelector("button").disabled=!1)})),recphone.addEventListener("keyup",(function(e){let value=this.value,regex=/[a-zA-Z]/g;phoneprefix=/[+254]/,13!==value.length||!0===regex.test(value)||!1===/[0-9]/g.test(value)||!1===phoneprefix.test(value)||"+254"!==value.slice(0,4)?(document.querySelector("#"+this.id+"Label").style.color="red",document.querySelector("#"+this.id+"Label").innerHTML="Phone (Use Format +254 XXX XXX XXX)",addressbook.querySelector("button").disabled=!0):(document.querySelector("#"+this.id+"Label").style.color="green",document.querySelector("#"+this.id+"Label").innerHTML='Phone <i class="fas fa-check"></i>',addressbook.querySelector("button").disabled=!1)})),county.addEventListener("keyup",(function(e){let value=this.value,regex=/[a-zA-Z]/g;value.length<3?(document.querySelector("#"+this.id+"Label").style.color="red",document.querySelector("#"+this.id+"Label").innerHTML="County Name must contain atleast 3 Characters",addressbook.querySelector("button").disabled=!0):!1===regex.test(value)||!0===/[0-9]/g.test(value)?(document.querySelector("#"+this.id+"Label").style.color="red",document.querySelector("#"+this.id+"Label").innerHTML="County Name can only contain letters",addressbook.querySelector("button").disabled=!0):(document.querySelector("#"+this.id+"Label").style.color="green",document.querySelector("#"+this.id+"Label").innerHTML='County <i class="fas fa-check"></i>',addressbook.querySelector("button").disabled=!1)})),box.addEventListener("keyup",(function(e){let value=this.value,regex=/[a-zA-Z]/g;value.length<4?(document.querySelector("#"+this.id+"Label").style.color="red",document.querySelector("#"+this.id+"Label").innerHTML="P.O BOX must contain atleast 4 characters",addressbook.querySelector("button").disabled=!0):!0===/[0-9]/g.test(value)&&!1===regex.test(value)?(document.querySelector("#"+this.id+"Label").style.color="green",document.querySelector("#"+this.id+"Label").innerHTML='P.O BOX <i class="fas fa-check"></i>',addressbook.querySelector("button").disabled=!1):(document.querySelector("#"+this.id+"Label").style.color="red",document.querySelector("#"+this.id+"Label").innerHTML="P.O BOX is must keep fomart ( 123-400) ",addressbook.querySelector("button").disabled=!0)})),reclocation.addEventListener("keyup",(function(e){let value=this.value,regex=/[a-zA-Z]/g;value.length<6?(document.querySelector("#"+this.id+"Label").style.color="red",document.querySelector("#"+this.id+"Label").innerHTML="Location must contain atleast 6 characters",addressbook.querySelector("button").disabled=!0):!1===regex.test(value)||!0===/[0-9]/g.test(value)?(document.querySelector("#"+this.id+"Label").style.color="red",document.querySelector("#"+this.id+"Label").innerHTML="Location details can only contain alphabet characters",addressbook.querySelector("button").disabled=!0):(document.querySelector("#"+this.id+"Label").style.color="green",document.querySelector("#"+this.id+"Label").innerHTML='Location <i class="fas fa-check"></i>',addressbook.querySelector("button").disabled=!1)})),locDesc.addEventListener("keyup",(function(e){let value=this.value,regex=/[a-zA-Z]/g;value.length>0&&value.length<15?(document.querySelector("#"+this.id+"Label").style.color="red",document.querySelector("#"+this.id+"Label").innerHTML="Location Description too Short",addressbook.querySelector("button").disabled=!0):value.length>0&&value.length<15&&!1===regex.test(value)||!0===/[0-9]/g.test(value)?(document.querySelector("#"+this.id+"Label").style.color="red",document.querySelector("#"+this.id+"Label").innerHTML="Location Description Name can only contain letters",addressbook.querySelector("button").disabled=!0):0===value.length?(document.querySelector("#"+this.id+"Label").style.color="black",document.querySelector("#"+this.id+"Label").innerHTML='Location Description <span class="w3-small">(optional)</span>',addressbook.querySelector("button").disabled=!1):(document.querySelector("#"+this.id+"Label").style.color="green",document.querySelector("#"+this.id+"Label").innerHTML='Location Description <span class="w3-small">(optional)</span> <i class="fas fa-check"></i>',addressbook.querySelector("button").disabled=!1)}));let addressFormStatus=document.querySelector("#addressFormStatus");addressbook.addEventListener("submit",(function(e){if(e.preventDefault(),""!==recipient.value&&""!==recphone.value&&""!==reclocation.value&&""!==box&&""!==county){let addressdata="recipient="+recipient.value+"&recphone="+recphone.value+"&location="+reclocation.value+"&county"+county.value+"&locDesc="+locDesc.value+"&box="+box.value;xhttp.onreadystatechange=function(){1===this.readyState?(addressFormStatus.style.backgroundColor="#d6f5d6",addressFormStatus.style.color="black",addressFormStatus.innerHTML="Processing.Please wait <i class='w3-spin fas fa-spinner'></i>",addressbook.querySelector("button").disabled=!0):4===this.readyState&&(addressbook.querySelector("button").disabled=!1,200==this.status?(addresslabelsDef(),addressFormStatus.style.backgroundColor=succbg,addressFormStatus.style.color="black",addressFormStatus.innerHTML="success",setTimeout(()=>{addressFormStatus.innerHTML=""},1e3),window.location.href="/authentication.html"):0===this.status?(addressFormStatus.style.backgroundColor=errbg,addressFormStatus.style.color="black",addressFormStatus.innerHTML="Failed. Net Error "):401===this.status?window.location.href="/authentication.html":(addressFormStatus.style.backgroundColor=errbg,addressFormStatus.style.color="black",addressFormStatus.innerHTML="Failed"))},xhttp.open("POST",post_add_address,!0),xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhttp.send(addressdata)}else addressbook.querySelectorAll("input").forEach(input=>{""===input.value&&(document.querySelector("#"+input.id+"Label").style.color="red")}),addressbook.querySelector("button").disabled=!0}))}else if(currentL[3].search("personal-details.html")>-1){animator();let personalDetails=document.querySelector("#personalDetails"),updtPassbtn=document.querySelector("#triggerPasswordUpdate"),updatePasswordForm=document.querySelector("#updatePassword"),updPassForm=document.querySelector("#updPassForm");updtPassbtn.addEventListener("click",(function(){let style_state;"none"===getComputedStyle(updatePasswordForm).display?updatePasswordForm.style.display="block":updatePasswordForm.style.display="none"}));let modifyName=document.querySelector("#modifyName"),cancelNameMod=document.querySelector("#cancelNameMod"),modifyPhone=document.querySelector("#modifyPhone"),cancelPhoneMod=document.querySelector("#cancelPhoneMod"),currentName=document.querySelector("#currentName"),currentPhone=document.querySelector("#currentPhone");modifyName.addEventListener("click",(function(e){1!==xhttp.readyState?(textValue=this.innerText,"Edit"===textValue?(this.innerHTML="Update",currentName.style.color="black",currentName.disabled=!1):"Update"===textValue?(xhttp.onreadystatechange=function(){1===this.readyState?(modifyName.innerHTML=' <span class="w3-text-green w3-tiny">Processing <span class="w3-animate-fading"> ...</span></span>',cancelNameMod.disabled=!0):4===this.readyState&&(cancelNameMod.disabled=!1,0===this.status?(modifyName.style.color="red",modifyName.innerHTML="Net Err",setTimeout(()=>{modifyName.style.color="#2196F3",modifyName.innerHTML='<i class="fas fa-pen"></i>Edit'},2500)):200===this.status?(modifyName.style.color="green",modifyName.innerHTML="Success",currentNam.style.color="black",currentName.disabled=!0,setTimeout(()=>{modifyName.style.color="#2196F3",modifyName.innerHTML='<i class="fas fa-pen"></i>Edit'},1500)):(modifyName.style.color="red",modifyName.innerHTML="Failed",currentName.disabled=!1,currentName.style.color="black",setTimeout(()=>{modifyName.style.color="#2196F3",modifyName.innerHTML='<i class="fas fa-pen"></i>Edit'},2500)))},xhttp.open("POST",post,!0),xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhttp.send("username="+currentName.value)):window.location.reload()):(modifyName.style.color="red",modifyName.innerHTML=' <span class="w3-tiny">Please Wait !</span>',setTimeout(()=>{modifyName.style.color="#2196F3",modifyName.innerHTML='<i class="fas fa-pen"></i>Edit'},3e3))})),modifyPhone.addEventListener("click",(function(e){1!==xhttp.readyState?(textValue=this.innerText,currentPhone.disabled=!1,"Edit"===textValue?(this.innerText="Update",currentPhone.disabled=!1):"Update"===textValue&&(xhttp.onreadystatechange=function(){1===this.readyState?(modifyPhone.innerHTML=' <span class="w3-text-green w3-tiny">Processing <span class="w3-animate-fading"> ...</span></span>',cancelPhoneMod.disabled=!0):4===this.readyState&&(cancelPhoneMod.disabled=!1,0===this.status?(modifyPhone.style.color="red",modifyPhone.innerHTML="Net Err",setTimeout(()=>{modifyPhone.style.color="#2196F3",modifyPhone.innerHTML='<i class="fas fa-pen"></i>Edit'},2500)):200===this.status?(modifyPhone.style.color="green",modifyPhone.innerHTML="Success",currentPhone.style.color="black",setTimeout(()=>{modifyPhone.style.color="#2196F3",modifyPhone.innerHTML='<i class="fas fa-pen"></i>Edit'},1500)):401===this.status?window.location.href="/authentication.html":(modifyPhone.style.color="red",modifyPhone.innerHTML="Failed",currentPhone.disabled=!1,currentPhone.style.color="black",setTimeout(()=>{modifyPhone.style.color="#2196F3",modifyPhone.innerHTML='<i class="fas fa-pen"></i>Edit'},2500)))},xhttp.open("POST",post_edit_phone,!0),xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhttp.send("phone="+currentPhone.value))):(modifyPhone.style.color="red",modifyPhone.innerHTML=' <span class="w3-tiny">Please Wait !</span>',setTimeout(()=>{modifyPhone.style.color="#2196F3",modifyPhone.innerHTML='<i class="fas fa-pen"></i>Edit'},3e3))})),cancelNameMod.addEventListener("click",(function(){modifyName.innerHTML='<i class="fas fa-pen"></i>Edit ',modifyName.disabled=!1,currentName.disabled=!0})),cancelPhoneMod.addEventListener("click",(function(){modifyPhone.innerHTML='<i class="fas fa-pen"></i>Edit ',modifyPhone.disabled=!1,currentPhone.disabled=!0})),currentName.addEventListener("keyup",(function(){let regex=/[0-9]/g,value=this.value;value.length<6||value.length>25?(this.style.color="red",modifyName.disabled=!0):!0===regex.test(value)?(this.style.color="red",modifyName.disabled=!0):(this.style.color="green",modifyName.disabled=!1)})),currentPhone.addEventListener("keyup",(function(){let regex=/[0-9]/g,value=this.value;13!==value.length?(this.style.color="red",modifyPhone.disabled=!0):!1===regex.test(value)||!0===/[a-zA-Z]/g.test(value)||"+254"!==value.slice(0,4)?(this.style.color="red",modifyPhone.disabled=!0):(this.style.color="green",modifyPhone.disabled=!1)}));let current_password=document.querySelector("#current_password"),new_password=document.querySelector("#new_password"),confirm_new_password=document.querySelector("#confirm_new_password"),updatePassword=document.querySelector("#updatePassword");current_password.addEventListener("keyup",(function(){let value=this.value,label=document.querySelector("#"+this.id+"Label"),lettCheck=/[a-zA-Z]/,numCheck=/[0-9]/;value.length<6?(label.innerText="Password Must contain atleast 6 Characters",label.style.color="red",updatePasswordForm.querySelector("button").disabled=!0):!1===lettCheck.test(value)||!1===numCheck.test(value)?(label.innerText="Password Must Include Letters and Numbers",label.style.color="red",updatePasswordForm.querySelector("button").disabled=!0):(label.innerHTML="Current Password <i class='fas fa-check'></i>",label.style.color="green",updatePasswordForm.querySelector("button").disabled=!1)})),new_password.addEventListener("keyup",(function(){let value=this.value,label=document.querySelector("#"+this.id+"Label"),lettCheck=/[a-zA-Z]/,numCheck=/[0-9]/;value.length<6?(label.innerText="Password Must contain atleast 6 Characters",label.style.color="red"):!1===lettCheck.test(value)||!1===numCheck.test(value)?(label.innerText="Password Must Include Letters and Numbers",label.style.color="red"):(label.innerHTML="New Password <i class='fas fa-check'></i>",label.style.color="green")})),confirm_new_password.addEventListener("keyup",(function(){let value=this.value,label=document.querySelector("#"+this.id+"Label");new_password.value!==value?(label.innerHTML='Password does not match "New Password"',label.style.color="red"):(label.innerHTML="Confirm New Password <i class='fas fa-check'></i>",label.style.color="green")}));let defaultLabels=["Current Password","New Password","Confirm New Password"];updatePasswordForm.addEventListener("submit",(function(e){e.preventDefault(),document.querySelector("body").scrollTop=0,updatePasswordForm.querySelectorAll("input").forEach(input=>{""===input.value&&(document.querySelector("#"+input.id+"label").style.color="red")}),""===current_password.value||""===new_password.value||""===confirm_new_password?(updPassForm.style.color="black",updPassForm.style.backgroundColor="#ffb3b3",updPassForm.innerHTML="Correct the Highlighted Errors"):current_password.value===new_password.value?(updPassForm.style.color="black",updPassForm.style.backgroundColor="#ffb3b3",updPassForm.innerHTML="New Password and Old password CANNOT be the same"):(xhttp.onreadystatechange=function(){0===this.readyState?(updPassForm.style.color="black",updPassForm.style.backgroundColor="#ffb3b3",updPassForm.innerHTML="Internet Connection Error"):1===this.readyState?(updPassForm.style.color="#4dff88",updPassForm.style.backgroundColor="black",updPassForm.innerHTML="Updating.Please wait <i class='w3-spin fas fa-spinner'></i>",updatePasswordForm.querySelector("button").disabled=!0):4===this.readyState&&(updatePasswordForm.querySelector("button").disabled=!1,updatePasswordForm.querySelectorAll("input").forEach(input=>{input.value=""}),updatePasswordForm.querySelectorAll("label").forEach(label=>{label.style.color="black"}),updatePasswordForm.querySelectorAll("label")[0].innerHTML=defaultLabels[0],updatePasswordForm.querySelectorAll("label")[1].innerHTML=defaultLabels[1],updatePasswordForm.querySelectorAll("label")[2].innerHTML=defaultLabels[2],200===this.status?(updPassForm.style.color="black",updPassForm.style.backgroundColor="#99ffbb",updPassForm.innerHTML="Password Updated Succesfully",setTimeout(()=>{updPassForm.innerHTML=""},3e3)):401===this.status?(updPassForm.style.color="black",updPassForm.style.backgroundColor="#ffb3b3",updPassForm.innerHTML="You provided an Incorrect 'Current Password'"):(updPassForm.style.color="black",updPassForm.style.backgroundColor="#ffb3b3",updPassForm.innerHTML="Faled to Update Password"))},xhttp.open("POST",post_update_password,!0),xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhttp.send("currentPassword="+document.querySelector("#current_password").value+"&newpassword="+document.querySelector("#new_password").value+"&confnewpassword="+document.querySelector("#confirm_new_password").value))}))}else if(currentL[3].search("checkout.html")>-1){animator();let cart_itm=document.querySelector("#cart-checkout"),addr_itm=document.querySelector("#delivery-address"),paym_opt=document.querySelector("#paym_opt"),totalCart=document.querySelector("#cartTotal"),cartOkayBTN=document.querySelector("#cartOkay"),cart_wrapper=document.querySelector("body"),addressOkayBTN=document.querySelector("#addressOkay"),cart_itm_prog=document.querySelector("#cart_itm"),addr_itm_prog=document.querySelector("#addr_itm"),paym_itm_prog=document.querySelector("#paym_itm"),preloader=grabBYID("#checkoutPreload"),cartwrapper=grabBYID("#cart-wrapper"),animatorEffect=new styler(grabBYID("#animator-effect")),addrItem=document.querySelector("#primary-address").querySelectorAll(".addITEM"),user,shipprice=document.querySelectorAll(".cost"),totalcart,shipmcost,vatcharges,usercookiepostion=document.cookie.search("curruser"),footer=document.querySelector("#footer-content"),navbarLarge=document.querySelector("#nav-bar-large"),navbarSmall=document.querySelector("#nav-bar-small");""===document.cookie?(document.cookie='curruser={"name":null,"phone":null,"shippcharges":null,"County":null,"BOX":null,"Location":null,"station":null,"LocationDescr":null,"LocationID":null};path=/checkout.html;expires=Thu,01 Jan 2099 00:00:00 UTC;',user=document.cookie.split(";").filter(item=>{if(item.search("curruser")>-1)return item}),user=JSON.parse(user[0].split("=")[1])):""!==document.cookie&&-1===usercookiepostion?(document.cookie='curruser={"name":null,"phone":null,"shippcharges":null,"County":null,"BOX":null,"Location":null,"station":null,"LocationDescr":null,"LocationID":null};path=/checkout.html;expires=Thu,01 Jan 2099 00:00:00 UTC;',user=document.cookie.split(";").filter(item=>{if(item.search("curruser")>-1)return item}),user=JSON.parse(user[0].split("=")[1])):usercookiepostion>-1&&(user=document.cookie.split(";").filter(item=>{if(item.search("curruser")>-1)return item}),user=JSON.parse(user[0].split("=")[1]),addrItem[0].innerHTML=user.name,addrItem[1].innerHTML=user.phone,addrItem[2].innerHTML=user.County,addrItem[3].innerHTML=user.Location,addrItem[4].innerHTML=user.BOX,addrItem[5].innerHTML=user.station,addrItem[6].innerHTML=user.LocationDescr),xhttp.onreadystatechange=function(){if(4===this.readyState)if(footer.innerHTML=footerContentScript,0===this.status)animatorEffect.applyStyle("red","inherit"),animatorEffect.updateinnerhtml('Oops.You have lost your internet connection <a class="w3-text-black" onclick="<script>window.location.reload()<\/script>" href="">Click here to Retry</a>'),preloader.querySelectorAll("div")[0].innerHTML="Net Error",navbarLarge.innerHTML=notLoggedInLargeScript,navbarSmall.innerHTML=notLoggedInsmallScript;else if(200===this.status){if(preloader.style.display="none",cartwrapper.style.display="block",!1===JSON.parse(this.responseText).authentication)window.location.href="/authentication.html";else if(!0===JSON.parse(this.responseText).authentication){navbarLarge.innerHTML=LoggedInLargeScript,navbarSmall.innerHTML=LoggedInsmallScript;let cartItemDisplayRow=document.querySelector("#cartItemDisplayRow");JSON.parse(this.responseText).cart.length>0?JSON.parse(this.responseText).cart.forEach(item=>{cartItemDisplayRow.innerHTML=cartItemDisplayRow.innerHTML+'<div class="w3-row cart-section-itm w3-margin-top w3-border w3-center">                                        <div class="w3-hide" id="unitPriceID'+item.id+'">'+item.newprice+'</div>                     <div class="w3-col s4 w3-center l5 cart-item-desc">                         <img src="'+item.img+'" alt="s2"><br>                         <span class="cart-item-title w3-small">'+item.name+' </span> <br>                         <span class="w3-small w3-text-green" style="font-weight: bold;">KES '+item.newprice+'</span>                     </div>                     <div class="w3-col s2 l2 quantity-contr  cart-item-desc">                     <div class="addQuantity  ID'+item.id+'" ><i class="fas fa-plus-square" ></i><br></div>                         <input type="text"  disabled class="w3-input w3-center" value="'+item.quantity+'"   name="quantity" min="1" step="1" id="ID'+item.id+'">                     <div class="decQuantity ID'+item.id+'"><i class="fas fa-minus-square "  ></i></div>                       </div>                     <div class="w3-col del-contr s3 l2 cart-item-desc">                     <div class="ID'+item.id+'  del_ico" ><i class="fas  delete-icon fa-trash w3-center"></i></div>                     </div>                                          <div class="w3-col prc-cont s3 l3 w3-center cart-item-desc">                         <span class="w3-small" id="item-total-price">KES <span class="totalPriceCalc" id="priceTotalID'+item.id+'">'+item.newprice+"</span></span>"}):document.getElementById("cart-checkout").innerHTML='<div style="font-weight:bold;width:95%;margin-left:2.5%" class="w3-panel w3-border w3-border-gray w3-padding-32 w3-pale-yellow w3-center w3-large">You shopping cart is currently empty.</div>',void 0!==localStorage.cartOkay&&"null"!==localStorage.cartOkay&&(cart_itm_prog.style.backgroundColor="palegreen",cart_itm_prog.innerHTML='<span style="font-weight:bold;color:black">Cart Verified</span> <br><i class="fas fa-check"></i>'),void 0!==localStorage.addressOkay&&"null"!==localStorage.addressOkay&&(addr_itm_prog.style.backgroundColor="palegreen",addr_itm_prog.innerHTML='<span style="font-weight:bold;color:black">Address Verified</span> <br><i class="fas fa-check"></i>');let result=JSON.parse(this.responseText),eachItemTotal;document.cookie='curruser={"name":"'+result.user.name+'","phone":"'+result.user.phone+'","County":"'+result.address.County+'","BOX":"'+result.address.BOX+'","Location":"'+result.address.Location+'","LocationDescr":"'+result.address.locationDesc+'","LocationID":"'+result.address.locid+'","station":"'+result.address.Station+'","shippcharges":"'+result.address.shippingcharges+'"};path=/checkout.html;expires=Thu,01 Jan 2099 00:00:00 UTC;',user=document.cookie.split(";").filter(item=>{if(item.search("curruser")>-1)return item}),user=JSON.parse(user[0].split("=")[1]),addrItem[0].innerHTML=user.name,addrItem[1].innerHTML=user.phone,void 0===localStorage.selectedAddress?(addrItem[2].innerHTML=user.County,addrItem[3].innerHTML=user.Location,addrItem[4].innerHTML=user.BOX,addrItem[5].innerHTML=user.station,addrItem[6].innerHTML=user.LocationDescr,shipmcost=document.cookie.split(";").filter(item=>item.search("shippcharges")>-1?item.shippcharges:0),totalcart=0,vatcharges=0,shipprice[0].innerHTML="N/A",shipprice[1].innerHTML="N/A",shipprice[2].innerHTML="N/A",shipprice[3].innerHTML=Number(shipmcost)):(document.cookie="locationID="+user.LocationID+";path=/;expires=Thu,01 Jan 1999 00:00:00 UTC;",document.cookie="locationID="+JSON.parse(localStorage.selectedAddress).LocationID+";path=/checkout.html;expires=Thu,01 Jan 2099 00:00:00 UTC",addrItem[2].innerHTML=JSON.parse(localStorage.selectedAddress).County,addrItem[3].innerHTML=JSON.parse(localStorage.selectedAddress).Location,addrItem[4].innerHTML=JSON.parse(localStorage.selectedAddress).BOX,addrItem[5].innerHTML=JSON.parse(localStorage.selectedAddress).station,addrItem[6].innerHTML=JSON.parse(localStorage.selectedAddress).decribeLoc),"null"!==localStorage.navigationTrack&&("pickupaddressSelected"===JSON.parse(localStorage.navigationTrack).data?(cart_itm.style.display="none",addr_itm.style.display="block",totalcart=document.cookie.split(";").filter(item=>{if(item.search("cartTotal")>-1)return item}),vatcharges=document.cookie.split(";").filter(item=>{if(item.search("VAT")>-1)return item}),shipmcost=JSON.parse(localStorage.selectedAddress).charges,totalcart=totalcart[0].split("=")[1],vatcharges=vatcharges[0].split("=")[1],shipprice[0].innerHTML=totalcart,shipprice[2].innerHTML=shipmcost,shipprice[3].innerHTML=Number(totalcart)+Number(shipmcost),shipprice[1].innerHTML=vatcharges,localStorage.navigationTrack='{"from":"/select-address.html","to":"/checkout.html","data":"null","redirect":"/checkout.html"}'):"customaddressSelected"===JSON.parse(localStorage.navigationTrack).data?(cart_itm.style.display="none",addr_itm.style.display="block",localStorage.navigationTrack='{"from":"/select-address.html","to":"/checkout.html","data":"null","redirect":"/checkout.html"}',totalcart=document.cookie.split(";").filter(item=>{if(item.search("cartTotal")>-1)return item}),vatcharges=document.cookie.split(";").filter(item=>{if(item.search("VAT")>-1)return item}),shipmcost=JSON.parse(localStorage.selectedAddress).charges,totalcart=totalcart[0].split("=")[1],vatcharges=vatcharges[0].split("=")[1],shipprice[0].innerHTML=totalcart,shipprice[2].innerHTML=shipmcost,shipprice[3].innerHTML=Number(totalcart)+Number(shipmcost),shipprice[1].innerHTML=vatcharges):(cart_itm.style.display="block",addr_itm.style.display="none")),cart_itm_prog.addEventListener("click",()=>{addr_itm.style.display="none",paym_opt.style.display="none",cart_itm.style.display="block",cart_wrapper.style.scrollBehavior="smooth",cart_wrapper.scrollTop=0}),addr_itm_prog.addEventListener("click",()=>{if(void 0!==localStorage.cartOkay&&"null"!==localStorage.cartOkay){let totalcart=document.cookie.split(";").filter(item=>{if(item.search("cartTotal")>-1)return item}),vatcharges=document.cookie.split(";").filter(item=>{if(item.search("VAT")>-1)return item}),shipmcost=JSON.parse(localStorage.selectedAddress).charges;totalcart=totalcart[0].split("=")[1],vatcharges=vatcharges[0].split("=")[1],shipprice[0].innerHTML=totalcart,shipprice[2].innerHTML=shipmcost,shipprice[3].innerHTML=Number(totalcart)+Number(shipmcost),shipprice[1].innerHTML=vatcharges,addr_itm.style.display="block",paym_opt.style.display="none",cart_itm.style.display="none",cart_wrapper.style.scrollBehavior="smooth",cart_wrapper.scrollTop=0}}),document.querySelectorAll(".totalPriceCalc").forEach(itm=>{totalCart.innerText=Number(totalCart.innerText)+Number(itm.innerText)});let addQuantity=document.querySelectorAll(".addQuantity"),decQuantity=document.querySelectorAll(".decQuantity");addQuantity.forEach(elm=>{elm.addEventListener("click",(function(e){let valueinput=document.querySelector("#"+this.classList[1]),currValue=Number(valueinput.value);valueinput.value=currValue+1;let toDisplayTotal=document.querySelector("#priceTotal"+this.classList[1]),unitPrice=document.querySelector("#unitPrice"+this.classList[1]).innerText;toDisplayTotal.innerText=Number(valueinput.value)*Number(unitPrice),totalCart.innerText=Number(totalCart.innerText)+Number(unitPrice);let curr_bask=JSON.parse(localStorage.basketDetails),itmID=elm.classList[1],result=curr_bask.filter(item=>{if(item.itemID==itmID.slice("2"))return item}),newquant=Number(result[0].itemQuantity)+1,prevvalue='{"itemID":"'+result[0].itemID+'","itemQuantity":"'+result[0].itemQuantity+'"}';result='{"itemID":"'+result[0].itemID+'","itemQuantity":"'+newquant+'"}';let newbasket=localStorage.basketDetails.replace(prevvalue,result);localStorage.basketDetails=newbasket;let newnum=JSON.parse(localStorage.basketDetails),newv=0;newnum.forEach(element=>{newv+=Number(element.itemQuantity)}),document.querySelectorAll(".basket_status").forEach(itm=>{itm.innerText=newv,updateCartInput(newv)})}))}),decQuantity.forEach(elm=>{elm.addEventListener("click",(function(e){let valueinput=document.querySelector("#"+this.classList[1]),currValue=Number(valueinput.value);if(valueinput.value>1){valueinput.value=currValue-1;let toDisplayTotal=document.querySelector("#priceTotal"+this.classList[1]),unitPrice=document.querySelector("#unitPrice"+this.classList[1]).innerText;toDisplayTotal.innerText=Number(valueinput.value)*Number(unitPrice),totalCart.innerText=Number(totalCart.innerText)-Number(unitPrice);let curr_bask=JSON.parse(localStorage.basketDetails),itmID=elm.classList[1],result=curr_bask.filter(item=>{if(item.itemID==itmID.slice("2"))return item}),newquant=Number(result[0].itemQuantity)-1,prevvalue='{"itemID":"'+result[0].itemID+'","itemQuantity":"'+result[0].itemQuantity+'"}';result='{"itemID":"'+result[0].itemID+'","itemQuantity":"'+newquant+'"}';let newbasket=localStorage.basketDetails.replace(prevvalue,result);localStorage.basketDetails=newbasket;let newnum=JSON.parse(localStorage.basketDetails),newv=0;newnum.forEach(element=>{newv+=Number(element.itemQuantity)}),document.querySelectorAll(".basket_status").forEach(itm=>{itm.innerText=newv,updateCartInput(newv)})}else{this.disabled=!0;let toDisplayTotal=document.querySelector("#priceTotal"+this.classList[1]),unitPrice=document.querySelector("#unitPrice"+this.classList[1]).innerText;toDisplayTotal.innerText=Number(valueinput.value)*Number(unitPrice),toDisplayTotal.innerText=Number(valueinput.value)*Number(unitPrice)}}))}),document.querySelectorAll(".del_ico").forEach(itm=>{itm.addEventListener("click",()=>{let bask=JSON.parse(localStorage.basketDetails),todelete=bask.filter(item=>{if(item.itemID===itm.classList[0].slice(2))return item});if(bask.length>1){let prev='{"itemID":"'+todelete[0].itemID+'","itemQuantity":"'+todelete[0].itemQuantity+'"}',newlocStorage;newlocStorage=localStorage.basketDetails.replace(prev,""),1===newlocStorage.search(",")?newlocStorage=newlocStorage.replace(",",""):newlocStorage.search(",,")>0?newlocStorage=newlocStorage.replace(",,",","):newlocStorage.search("},")>0&&(newlocStorage=newlocStorage.replace("},","}")),localStorage.basketDetails=newlocStorage;let newnum=JSON.parse(localStorage.basketDetails),newv=0;newnum.forEach(element=>{newv+=Number(element.itemQuantity)}),document.querySelectorAll(".basket_status").forEach(itm=>{itm.innerText=newv,updateCartInput(newv)})}else 1===bask.length&&(localStorage.basketDetails=null,document.querySelectorAll(".basket_status").forEach(itm=>{itm.innerText=0}));window.location.reload()})}),addr_itm.querySelectorAll("button")[0].addEventListener("click",(function(){localStorage.navigationTrack='{"from":"/checkout.html","to":"select-address.html","data":"customaddress","redirect":"/checkout.html"}',window.location.href="/select-address.html"})),addr_itm.querySelectorAll("button")[1].addEventListener("click",(function(){localStorage.navigationTrack='{"from":"/checkout.html","to":"select-address.html","data":"pickupaddress","redirect":"/checkout.html"}',window.location.href="/select-address.html"})),cartOkayBTN.addEventListener("click",(function(){"null"!==localStorage.basketDetails&&(xhttp.onreadystatechange=function(){if(1==this.readyState)cartOkayBTN.style.backgroundColor="white",cartOkayBTN.style.color="green",cartOkayBTN.innerHTML='<span class="w3-small">Processing </span>   <img class="loadgif-cartokay" src="./assests/images/833.gif" alt="loader">',cartOkayBTN.style.cursor="not-allowed";else if(4===this.readyState)if(200===this.status){cartOkayBTN.style.backgroundColor=succbg,cartOkayBTN.style.color="black",cartOkayBTN.innerHTML=' <span class="w3-small">Updated Succesfully</span>',cartOkayBTN.style.cursor="Pointer",document.cookie="cartTotal="+JSON.parse(this.responseText).cartTotal+";path=/checkout.html",document.cookie="VAT="+JSON.parse(this.responseText).VAT+";path=/checkout.html",shipprice[0].innerHTML=JSON.parse(this.responseText).cartTotal,shipprice[1].innerHTML=JSON.parse(this.responseText).VAT;let priceship=document.cookie.split(";").filter(item=>item.search("shippcharges")>-1?item:0);"object"==typeof priceship?(shipprice[2].innerHTML=JSON.parse(priceship[0].split("=")[1]).shippcharges,shipprice[3].innerHTML=Number(JSON.parse(this.responseText).cartTotal)+Number(shipprice[2].innerHTML)):(shipprice[2].innerHTML="N/A",shipprice[3].innerHTML=Number(JSON.parse(this.responseText).cartTotal)),void 0===localStorage.cartOkay?localStorage.setItem("cartOkay",null):"null"===localStorage.cartOkay&&(localStorage.cartOkay="Okay"),setTimeout(()=>{cart_itm.style.display="none",cart_wrapper.style.scrollBehavior="smooth",cart_wrapper.scrollTop=0,cart_itm_prog.style.backgroundColor="palegreen",cart_itm_prog.innerHTML='<span style="font-weight:bold;color:black">Cart Verified</span> <br><i class="fas fa-check"></i>',addr_itm.style.display="block"},100)}else cartOkayBTN.style.backgroundColor=errbg,cartOkayBTN.style.color="black",cartOkayBTN.innerHTML=' <span class="w3-small">Net Error</span>',cartOkayBTN.style.cursor="Pointer",setTimeout(()=>{cartOkayBTN.style.color="green",cartOkayBTN.style.backgroundColor="white",cartOkayBTN.innerHTML='<span class="w3-small">Proceed</span>'},2e3)},xhttp.open("POST",post_send_cart_to_backend,!0),xhttp.setRequestHeader("Content-type","application/json"),xhttp.send(localStorage.basketDetails))})),addressOkayBTN.addEventListener("click",(function(e){xhttp.onreadystatechange=function(){1===this.readyState?(addressOkayBTN.innerHTML='<span class="w3-small">Processing </span>   <img class="loadgif-cartokay" src="./assests/images/833.gif" alt="loader">',addressOkayBTN.style.cursor="not-allowed",addressOkayBTN.style.backgroundColor="white"):4===this.readyState&&(200===this.status?(addressOkayBTN.innerHTML="Success",addressOkayBTN.style.backgroundColor=succbg,addressOkayBTN.style.color="black",addressOkayBTN.style.cursor="pointer",void 0===localStorage.addressOkay?localStorage.setItem("addressOkay",null):"null"===localStorage.addressOkay&&localStorage.setItem("addressOkay","Okay"),paym_opt.style.display="block",addr_itm_prog.style.backgroundColor="palegreen",addr_itm_prog.innerHTML='<span style="font-weight:bold;color:black">Address Verified</span> <br><i class="fas fa-check"></i>',addr_itm.style.display="none",cart_itm.style.display="none",cart_wrapper.style.scrollBehavior="smooth",cart_wrapper.scrollTop=0,document.querySelector("#aboutTOpay").innerHTML=JSON.parse(this.responseText).topay):0===this.status?(addressOkayBTN.innerHTML="Net Error",addressOkayBTN.style.backgroundColor=errbg,addressOkayBTN.style.color="black",addressOkayBTN.style.cursor="pointer"):(addressOkayBTN.innerHTML="Error",addressOkayBTN.style.backgroundColor=errbg,addressOkayBTN.style.color="black",addressOkayBTN.style.cursor="pointer"))};let formData=document.cookie.split(";").filter(item=>{if(item.search("LocationID")>-1)return item});formData=formData[0].split("=")[1],xhttp.open("POST",post_verify_delivery_address,!0),xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhttp.send("addressID="+formData)}))}}else animatorEffect.applyStyle("red","inherit"),navbarLarge.innerHTML=notLoggedInLargeScript,navbarSmall.innerHTML=notLoggedInsmallScript,preloader.querySelectorAll("div")[0].innerHTML="Resource could not be found",animatorEffect.updateinnerhtml('Something went wrong <a class="w3-text-black" onclick="<script>window.location.reload()<\/script>" href="">Retry</a>')},xhttp.open("GET",get_checkout_items,!0),xhttp.send()}else if(currentL[3].search("view-product.html")>-1){let cartBTN;animator(),document.querySelectorAll(".addtoCart").forEach(btn=>{btn.addEventListener("click",(function(){let itmID=this.value,ITEMID=itmID.split(",")[0].split(":")[1].slice(1,-1),ITEMQuant=itmID.split(",")[1].split(":")[1].slice(1,2),BasketDetails=localStorage.basketDetails;if("null"===BasketDetails)new Promise((resolve,reject)=>{localStorage.basketDetails='[{"itemID":"'+ITEMID+'","itemQuantity":"1"}]',resolve()}).then(()=>{document.querySelectorAll(".basket_status").forEach(itm=>{itm.innerText=1,updateCartInput(1)})}).catch(error=>{console.log(error)});else if("null"!==BasketDetails){let searchRes;if(-1==BasketDetails.search(ITEMID)){let curr_bask_status=JSON.parse(localStorage.basketDetails);curr_bask_status.push({itemID:ITEMID,itemQuantity:"1"}),localStorage.basketDetails=JSON.stringify(curr_bask_status);let curr_bask=JSON.parse(localStorage.basketDetails);cartValue=0,curr_bask.forEach(itm=>{cartValue+=Number(itm.itemQuantity)}),document.querySelectorAll(".basket_status").forEach(itm=>{itm.innerText=cartValue,updateCartInput(cartValue)})}else{let curr_bask_status,Z=JSON.parse(localStorage.basketDetails).filter((itm,index)=>itm.itemID===ITEMID),prev_quantity=JSON.stringify(Z[0]),quantity_tracker=Number(Z[0].itemQuantity);quantity_tracker_new=quantity_tracker+1,BasketDetails=localStorage.basketDetails;let updated_quantity=JSON.stringify({itemID:ITEMID,itemQuantity:quantity_tracker_new.toString()}),updatedBasket=BasketDetails.replace(prev_quantity,updated_quantity);localStorage.basketDetails=updatedBasket;let curr_bask=JSON.parse(localStorage.basketDetails),initcart=0;curr_bask.forEach(itm=>{initcart+=Number(itm.itemQuantity)}),document.querySelectorAll(".basket_status").forEach(itm=>{itm.innerText=initcart,updateCartInput(initcart)})}}}))});let image_prev=document.querySelectorAll(".image-prev"),preview_magnified=document.querySelectorAll("#preview-magnified"),magnify_prod_image=document.querySelector("#magnify-prod-image");image_prev.forEach(item=>{item.addEventListener("click",(function(){let value=this.src;magnify_prod_image.innerHTML="  <img id='preview-magnified' src="+value+" alt='A50'>"}))}),document.querySelectorAll(".favicon").forEach(icon=>{icon.addEventListener("click",(function(){document.getElementById(this.id).style.color="brown";let key1="[",key2="]";if(localStorage.favourites.indexOf("[")>-1&&localStorage.favourites.indexOf("]")>-1&&-1===localStorage.favourites.indexOf(this.id)){let currentFav=localStorage.favourites.slice("1","-1");localStorage.favourites="["+currentFav+","+this.id+"]"}else-1===localStorage.favourites.indexOf("[")&&-1===localStorage.favourites.indexOf("]")&&-1===localStorage.favourites.indexOf(this.id)&&(localStorage.favourites="["+this.id+"]")}))})}else if(currentL[3].search("account-recovery.html")>-1){let footer=document.querySelector("#footer-content"),navbarLarge=document.querySelector("#nav-bar-large"),navbarSmall=document.querySelector("#nav-bar-small"),pageloader=document.querySelector("#pageloader");if(1===currentL[3].split("?").length)pageloader.querySelectorAll("div")[0].style.color="red",pageloader.querySelectorAll("div")[0].innerHTML='<i class="fas fa-exclamation-triangle w3-text-red"></i><br> Invalid Recovery Token.Check Your email address and  clicking on the link provided.';else if(-1===currentL[3].split("?")[1].search("token"))pageloader.querySelectorAll("div")[0].style.color="red",pageloader.querySelectorAll("div")[0].innerHTML='<i class="fas fa-exclamation-triangle w3-text-red"></i><br> Recovery Token appears to be broken.Check Your email address and  clicking on the link provided.';else if(currentL[3].split("?")[1].search("token")>-1&&currentL[3].split("?")[1].search("=")>-1&&currentL[3].split("?")[1].split("=")[1].length>8){pageloader.style.display="none",document.querySelector("#page-wrapper").style.display="block";let token=currentL[3].split("?")[1].split("=")[1];footer.innerHTML=footerContentScript,navbarLarge.innerHTML=notLoggedInLargeScript,navbarSmall.innerHTML=notLoggedInsmallScript,animator();let recovered_account=document.querySelector("#recovered_account"),confpassword=document.querySelector("#confpassword"),newpassword=document.querySelector("#newpassword"),acc_rec_status=document.querySelector("#acc_rec_status"),submitbtn=recovered_account.querySelector("button");function defaultRecoveryInputs(arr){"input"===arr[0]&&recovered_account.querySelectorAll("input").forEach(input=>{input.value=""}),"label"===arr[1]&&(recovered_account.querySelectorAll("label").forEach(label=>{label.style.color="black"}),recovered_account.querySelectorAll("label")[0].innerHTML="New Password",recovered_account.querySelectorAll("label")[1].innerHTML="Confirm New Password")}newpassword.addEventListener("keyup",(function(){let value=this.value,letterCheck=/[a-zA-Z]/,numCheck=/[0-9]/,label=document.querySelector("#"+this.id+"Label");value.length<6?(label.style.color="red",label.innerHTML="Password must be atleast 6 character long",submitbtn.disabled=!0):!1===letterCheck.test(value)&&!1===numCheck.test(value)?(label.style.color="red",label.innerHTML="Password must include Letters and Numbers",submitbtn.disabled=!0):(label.style.color="green",label.innerHTML="New Password <i class='fas fa-check'></i> ",submitbtn.disabled=!1)})),confpassword.addEventListener("keyup",(function(){let value=this.value,label=document.querySelector("#"+this.id+"Label");newpassword.value!==value?(label.style.color="red",label.innerHTML="Confirmation password mismatch ",submitbtn.disabled=!0):(label.style.color="green",label.innerHTML="Confirm New Password <i class='fas fa-check'></i> ",submitbtn.disabled=!1)})),recovered_account.addEventListener("submit",(function(e){e.preventDefault(),""!==newpassword.value&&""!==confpassword.value?(xhttp.onreadystatechange=function(){1===this.readyState?(acc_rec_status.style.backgroundColor=procbg,acc_rec_status.style.color="green",acc_rec_status.innerHTML="Processing.Please wait <i class='w3-spin fas fa-spinner'></i>",submitbtn.disabled=!0):4===this.readyState&&(200===this.status?(acc_rec_status.style.backgroundColor=succbg,acc_rec_status.style.color="black",acc_rec_status.innerHTML="Success",submitbtn.disabled=!1,defaultRecoveryInputs(["input","label"]),setTimeout(()=>{acc_rec_status.style.backgroundColor="white",acc_rec_status.innerHTML=null},3e3)):0===this.status?(acc_rec_status.style.backgroundColor=errbg,acc_rec_status.style.color="black",acc_rec_status.innerHTML="Oops. You appear to have lost your Internet Connection.Try Again",submitbtn.disabled=!1,defaultRecoveryInputs([null,"label"])):401===this.status?window.location.href="/authentication.html":(acc_rec_status.style.backgroundColor=errbg,acc_rec_status.style.color="black",acc_rec_status.innerHTML="Something went wrong.",submitbtn.disabled=!1,defaultRecoveryInputs([null,"label"])))},xhttp.open("POST",post_reset_password,!0),xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhttp.send("newpassword="+newpassword.value+"&confirmnewpassword="+confpassword.value+"&token="+token)):recovered_account.queryselectorAll("label").forEach(label=>{label.style.color="red"})}))}else pageloader.querySelectorAll("div")[0].style.color="red",pageloader.querySelectorAll("div")[0].innerHTML='<i class="fas fa-exclamation-triangle w3-text-red"></i><br> Invalid Recovery Token.Check Your email address and  clicking on the link provided.'}else if(currentL[3].search("list-products.html")>-1){animator();let key1="[",key2="]",cartBTN;setInterval(()=>{localStorage.favourites.indexOf(key1)>-1&&localStorage.favourites.indexOf(key2)>-1&&(xhttp.onreadystatechange=function(){200==this.status&&(localStorage.favourites="")},xhttp.open("POST",post_add_to_favourite,!0),xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhttp.send("items="+localStorage.favourites.slice(1,-1)))},3e4),document.querySelectorAll(".addtoCart").forEach(btn=>{btn.addEventListener("click",(function(){let itmID=this.value,ITEMID=itmID.split(",")[0].split(":")[1].slice(1,-1),ITEMQuant=itmID.split(",")[1].split(":")[1].slice(1,2),BasketDetails=localStorage.basketDetails;if("null"===BasketDetails)new Promise((resolve,reject)=>{localStorage.basketDetails='[{"itemID":"'+ITEMID+'","itemQuantity":"1"}]',resolve()}).then(()=>{document.querySelectorAll(".basket_status").forEach(itm=>{itm.innerText=1,updateCartInput(1)})}).catch(error=>{console.log(error)});else if("null"!==BasketDetails){let searchRes;if(-1==BasketDetails.search(ITEMID)){let curr_bask_status=JSON.parse(localStorage.basketDetails);curr_bask_status.push({itemID:ITEMID,itemQuantity:"1"}),localStorage.basketDetails=JSON.stringify(curr_bask_status);let curr_bask=JSON.parse(localStorage.basketDetails);cartValue=0,curr_bask.forEach(itm=>{cartValue+=Number(itm.itemQuantity)}),document.querySelectorAll(".basket_status").forEach(itm=>{itm.innerText=cartValue,updateCartInput(cartValue)})}else{let curr_bask_status,Z=JSON.parse(localStorage.basketDetails).filter((itm,index)=>itm.itemID===ITEMID),prev_quantity=JSON.stringify(Z[0]),quantity_tracker=Number(Z[0].itemQuantity);quantity_tracker_new=quantity_tracker+1,BasketDetails=localStorage.basketDetails;let updated_quantity=JSON.stringify({itemID:ITEMID,itemQuantity:quantity_tracker_new.toString()}),updatedBasket=BasketDetails.replace(prev_quantity,updated_quantity);localStorage.basketDetails=updatedBasket;let curr_bask=JSON.parse(localStorage.basketDetails),initcart=0;curr_bask.forEach(itm=>{initcart+=Number(itm.itemQuantity)}),document.querySelectorAll(".basket_status").forEach(itm=>{itm.innerText=initcart,updateCartInput(initcart)})}}}))}),document.querySelectorAll(".favicon").forEach(icon=>{icon.addEventListener("click",(function(){document.getElementById(this.id).style.color="brown";let key1="[",key2="]";if(localStorage.favourites.indexOf("[")>-1&&localStorage.favourites.indexOf("]")>-1&&-1===localStorage.favourites.indexOf(this.id)){let currentFav=localStorage.favourites.slice("1","-1");localStorage.favourites="["+currentFav+","+this.id+"]"}else-1===localStorage.favourites.indexOf("[")&&-1===localStorage.favourites.indexOf("]")&&-1===localStorage.favourites.indexOf(this.id)&&(localStorage.favourites="["+this.id+"]")}))})}else if("select-address.html"===currentL[3]){let homeofficeaddress=document.querySelector("#home-office-address"),address_item=document.querySelectorAll(".address-item");animator();let navtrack=JSON.parse(localStorage.navigationTrack);if("/checkout.html"===navtrack.from)if("pickupaddress"===navtrack.data){document.querySelector("#pickup-station").style.display="block",document.querySelector("#home-office-address").style.display="none";let county=grabBYID("#select-county"),area=grabBYID("#select-area"),station=grabBYID("#station"),proceedbtn=grabBYID("#save-address"),pickup_stationSec=grabBYID("#pickup-station"),shippingcharges,addit_descr,boxdetails,locid;proceedbtn.disabled=!0,county.disabled=!0,area.disabled=!0,station.disabled=!0,xhttp.onreadystatechange=function(){if(1===this.readyState)pickup_stationSec.querySelectorAll("label")[0].style.color="green",pickup_stationSec.querySelectorAll("label")[0].innerHTML='Fetching Counties. Please wait <span class="w3-animate-fading">...</span>';else if(4===this.readyState)if(navbarLarge.innerHTML=LoggedInLargeScript,navbarSmall.innerHTML=LoggedInsmallScript,200===this.status){pickup_stationSec.querySelectorAll("label")[0].style.color="black",pickup_stationSec.querySelectorAll("label")[0].innerHTML="Select County";let Response=JSON.parse(this.responseText).counties.split(",");county.disabled=!1,county.style.color="brown";let newOptions='<option  value="default">-- Click to Select County --</option>';Response.forEach(res=>{newOptions=newOptions.concat('<option value="'+res+'">'+res.toUpperCase()+"</option>")}),county.innerHTML=newOptions}else 0===this.status?(pickup_stationSec.querySelectorAll("label")[0].style.color="red",pickup_stationSec.querySelectorAll("label")[0].innerHTML="Net Error. You seem to have lost your internet connection"):401===this.status?window.location.href="/authentication.html":(pickup_stationSec.querySelectorAll("label")[0].style.color="red",pickup_stationSec.querySelectorAll("label")[0].innerHTML="Resource Could not be Found")},xhttp.open("GET",get_populate_addresses_for_delivery+"?county=all&area=none&stations=none",!0),xhttp.send(),county.addEventListener("change",(function(){area.innerHTML='<option value="default">--Select Area --</option>',station.innerHTML='<option value="deafult">--Select Station --</option>',station.disabled=!0,pickup_stationSec.querySelectorAll("label")[2].style.color="black",pickup_stationSec.querySelectorAll("label")[2].innerHTML="Select Station",grabBYID("#computedPricePickup").innerHTML="";let value=this.value;if("default"!==this.value){pickup_stationSec.querySelectorAll("label")[0].style.color="green",pickup_stationSec.querySelectorAll("label")[0].innerHTML=this.value+' county selected <i class="fas fa-check"></i>';let areaLabel=new styler(pickup_stationSec.querySelectorAll("label")[1]);xhttp.onreadystatechange=function(){if(1===this.readyState)areaLabel.applyStyle("lightgreen"),areaLabel.updateinnerhtml("Fetching Areas in "+value+', Please wait <span class="w3-animate-fading">...</span> ');else if(4===this.readyState)if(200===this.status){areaLabel.applyStyle("black"),areaLabel.updateinnerhtml("Select Area"),pickup_stationSec.querySelectorAll("label")[1].disabled=!1;let newOptions='<option  value="default">-- Click to Select Area --</option>',result;JSON.parse(this.responseText).areas.split(",").forEach(item=>{newOptions=newOptions.concat('<option value="'+item+'">'+item.toUpperCase()+"</option>")}),area.disabled=!1,area.innerHTML=newOptions}else 0===this.status?(areaLabel.applyStyle("red"),areaLabel.updateinnerhtml("Failed")):401===this.status&&(window.location.href="/authentication.html")},xhttp.open("GET",get_populate_addresses_for_delivery+"?county=all&area="+this.value+"&stations=none",!0),xhttp.send()}else pickup_stationSec.querySelectorAll("label")[0].style.color="red",pickup_stationSec.querySelectorAll("label")[0].innerHTML="Please Select a Valid County"})),area.addEventListener("change",(function(){let value=this.value;if("default"!==this.value){pickup_stationSec.querySelectorAll("label")[1].style.color="green",pickup_stationSec.querySelectorAll("label")[1].innerHTML=this.value+' area selected <i class="fas fa-check"></i>';let stationLabel=new styler(pickup_stationSec.querySelectorAll("label")[2]);xhttp.onreadystatechange=function(){if(1===this.readyState)stationLabel.applyStyle("lightgreen"),stationLabel.updateinnerhtml("Fetching Stations in "+value+', Please wait <span class="w3-animate-fading">...</span> ');else if(4===this.readyState)if(200===this.status){stationLabel.applyStyle("black"),stationLabel.updateinnerhtml("Select Station"),pickup_stationSec.querySelectorAll("label")[1].disabled=!1;let newOptions='<option  value="default">-- Click to Select Station --</option>',result;JSON.parse(this.responseText).stations.split(",").forEach(item=>{newOptions=newOptions.concat('<option value="'+item+'">'+item.toUpperCase()+"</option>")}),station.disabled=!1,station.innerHTML=newOptions}else 0===this.status?(stationLabel.applyStyle("red"),stationLabel.updateinnerhtml("Failed")):401===this.status&&(window.location.href="/authentication.html")},xhttp.open("GET",get_populate_addresses_for_delivery+"?county=all&area=none&stations="+value+"&query=none",!0),xhttp.send()}else pickup_stationSec.querySelectorAll("label")[1].style.color="red",pickup_stationSec.querySelectorAll("label")[1].innerHTML="Please Select a Valid Area"})),station.addEventListener("change",(function(){let value=this.value;if("default"!==this.value){let stationLabel=new styler(pickup_stationSec.querySelectorAll("label")[2]);xhttp.onreadystatechange=function(){1===this.readyState?(stationLabel.applyStyle("lightgreen","inherit"),stationLabel.updateinnerhtml("Fetching shipping charges for "+value+'<span class="w3-animate-fading"> ...</span>')):4===this.readyState&&(200===this.status?(stationLabel.applyStyle("green","inherit"),stationLabel.updateinnerhtml(value+' area selected <i class="fas fa-check"></i>'),grabBYID("#computedPricePickup").innerHTML='Shipment Charges :<span class="w3-text-brown"> KES '+JSON.parse(this.responseText).fee+"</span>",proceedbtn.disabled=!1,shippingcharges=JSON.parse(this.responseText).fee,addit_descr=JSON.parse(this.responseText).addressDesc,boxdetails=JSON.parse(this.responseText).BOX,locid=JSON.parse(this.responseText).LOCID):401===this.status?window.location.href="/authentication.html":(stationLabel.applyStyle("red","inherit"),stationLabel.updateinnerhtml("Something went wrong"),proceedbtn.disabled=!1))},xhttp.open("GET",get_populate_addresses_for_delivery+"?county=all&area=none&stations="+value+"&query=price",!0),xhttp.send()}else pickup_stationSec.querySelectorAll("label")[2].style.color="red",pickup_stationSec.querySelectorAll("label")[2].innerHTML="Please Select a Valid Station"})),proceedbtn.addEventListener("click",(function(e){e.preventDefault(),localStorage.navigationTrack='{"from":"/select-address.html","to":"/checkout.html","data":"customaddressSelected","redirect":"/checkout.html"}',void 0===localStorage.selectedAddress?localStorage.setItem("selectedAddress",null):""!==county.value&&""!==area.value&&""!==station.value&&(localStorage.selectedAddress='{"County":"'+county.value+'","Location":"'+area.value+'","station":"'+station.value+'","charges":"'+shippingcharges+'","decribeLoc":"'+addit_descr+'","BOX":"'+boxdetails+'","LocationID":"'+locid+'"}',window.location.href="/checkout.html")}))}else"customaddress"===navtrack.data&&(document.querySelector("#home-office-address").style.display="block",document.querySelector("#pickup-station").style.display="none",xhttp.onreadystatechange=function(){1===this.readyState?homeofficeaddress.innerHTML='<div class="w3-pale-yellow w3-center">Fetching addressess <span class="w3-animate-fading">...</span></div>':4===this.readyState&&(200===this.status?(homeofficeaddress.innerHTML=' <div id="w33e3Z" class=" w3-display-container w3-border address-item">   <p >ERICK NDERITU  <br> P.O BOX 123,<br>KAKAMEGA,<br>254727895935  </p>  <button style="background-color: yellow;" class="w3-btn  w3-center w3-margin-bottom w3-round w3-border w3-border-black select-del-address  ">Use this Address</button> </div> <div id="1w6egdt" class=" w3-display-container w3-border address-item">   <p >Brahim Mark  <br> P.O BOX 123,<br>Kisumu,<br>25472789534  </p>  <button style="background-color: yellow;" class="w3-btn  w3-center w3-margin-bottom w3-round w3-border w3-border-black select-del-address  ">Use this Address</button> </div>',document.querySelectorAll(".address-item").forEach(item=>{item.querySelector("button").addEventListener("click",(function(){xhttp.onreadystatechange=function(){1===this.readyState?(item.querySelector("button").style.backgroundColor="white",item.querySelector("button").innerHTML='<span class="w3-small">Processing </span>   <img class="loadgif-cartokay" src="./assests/images/833.gif" alt="loader">'):4===this.readyState&&(200===this.status?(item.querySelector("button").style.backgroundColor="white",item.querySelector("button").innerHTML='Address Selected <i class="fas fa-check"></i>',item.querySelector("button").style.color="green",localStorage.navigationTrack='{"from":"/select-address.html","to":"/checkout.html","data":"customaddressSelected","redirect":"/checkout.html"}',void 0===localStorage.selectedAddress?localStorage.setItem("selectedAddress",null):(localStorage.selectedAddress='{"County":"'+JSON.parse(this.responseText).address.County+'","Location":"'+JSON.parse(this.responseText).address.location+'","station":"'+JSON.parse(this.responseText).address.station+'","charges":"'+JSON.parse(this.responseText).address.shippingcharges+'","decribeLoc":"'+JSON.parse(this.responseText).address.addit_descr+'","BOX":"'+JSON.parse(this.responseText).address.BOX+'","LocationID":"'+JSON.parse(this.responseText).address.locid+'"}',window.location.href="/checkout.html")):0===this.status?(item.querySelector("button").style.backgroundColor="white",item.querySelector("button").style.color="red",item.querySelector("button").innerHTML="Net Err"):(item.querySelector("button").style.backgroundColor="white",item.querySelector("button").style.color="red",item.querySelector("button").innerHTML="Sever Error"))},xhttp.open("GET",get_verify_address+"?id="+this.parentNode.id),xhttp.send()}))})):0===this.status?homeofficeaddress.innerHTML='<div style="width:90%;margin-left:5%" class="w3-pale-red w3-text-black w3-center">You seem to have lost your internet connection <span class="w3-btn" style="text-decoration:underline;font-weight:bold" onClick="<script>window.location.reload()<\/script>" >Retry Now</span></div>':401===this.status?window.location.href="/authentication.html":homeofficeaddress.innerHTML='<div style="width:90%;margin-left:5%" class="w3-pale-red w3-text-black w3-center">Something went wrong</div>')},xhttp.open("GET",get_custom_addresses,!0),xhttp.send());else window.location.href="/checkout.html"}else if(currentL[3].search("receipt.html")>-1){let footer=document.querySelector("#footer-content"),navbarLarge=document.querySelector("#nav-bar-large"),navbarSmall=document.querySelector("#nav-bar-small"),recieptCard=document.querySelector("#recieptCard"),orderID=document.querySelector("#orderID"),orderPrice=document.querySelector("#orderPrice"),loaderreceipt=document.querySelector("#loader-receipt"),grabQuery=window.location.href.split("?");if(2===grabQuery.length){let transcode=grabQuery[1].split("=");2===transcode.length&&transcode[0].search("verify-code")>-1?(xhttp.onreadystatechange=function(){1===this.readyState||4===this.readyState&&(200===this.status?!1===JSON.parse(this.responseText).authentication&&!0!==JSON.parse(this.responseText).authentication?window.location.href="/authentication.html":!0===JSON.parse(this.responseText).authentication&&(navbarLarge.innerHTML=LoggedInLargeScript,navbarSmall.innerHTML=LoggedInsmallScript,loaderreceipt.style.display="none",recieptCard.style.display="block",orderID.innerHTML=JSON.parse(this.responseText).orderNO,orderPrice.innerHTML=JSON.parse(this.responseText).amount):0===this.status?(loaderreceipt.innerHTML='<div class="w3-pale-red w3-large w3-center w3-margin-bottom">Internet Error</div>You seem to have lost your internet connection. <span style="text-decoration:underline;color:brown"  onclick="window.location.reload()" class="w3-btn">Click here to retry</span>',navbarLarge.innerHTML=notLoggedInLargeScript,navbarSmall.innerHTML=NotLoggedInsmallScript):401===this.status?window.location.href="/authentication.html":(navbarLarge.innerHTML=notLoggedInLargeScript,navbarSmall.innerHTML=NotLoggedInsmallScript,loaderreceipt.innerHTML='<div class="w3-pale-red w3-large w3-center w3-margin-bottom">Report Error</div>Oops. We could not generate a reciept <div class="w3-btn" style="text-decoration:underline;color:brown"  onclick=" window.location.reload()" > Click here to retry </div><br>If the problem persists <a style="text-decoration:underline;font-weight:bold;color:blue" href="">click here contact customer care</a> '))},xhttp.open("GET",get_generate_receipt+"?transaction="+transcode[1],!0),xhttp.send()):loaderreceipt.innerHTML='<div class="w3-pale-red w3-large w3-center w3-margin-bottom">Error Generating Receipt</div>Oops. We could not generate a reciept <div class="w3-btn" style="text-decoration:underline;color:brown"  onclick=" window.location.reload()" > Click here to retry </div><br>If the problem persists <a style="text-decoration:underline;font-weight:bold;color:blue" href="">click here contact customer care</a> '}else console.log(LoggedInLargeScript),navbarLarge.innerHTML=LoggedInLargeScript,navbarSmall.innerHTML=LoggedInsmallScript,loaderreceipt.innerHTML='<div class="w3-pale-red w3-large w3-center w3-margin-bottom">Error Generating Report</div>Oops. We could not generate a reciept <div class="w3-btn" style="text-decoration:underline;color:brown"  onclick=" window.location.reload()" > Click here to retry </div><br>If the problem persists <a style="text-decoration:underline;font-weight:bold;color:blue" href="">click here contact customer care</a> '}else animator();